---
layout: post
title: OS X(10.11)ì— ASP.NET Application
date:   2015-10-07 13:24:23 +9:00 GMT
categories: 
  - ASP.NET
tags: 
  - osx
  - VSCode
  - ASP.NET 5
  - DNX
  - mongodb
---


## ê°œìš”

## ì„¤ì¹˜

#### Install the .NET Version Manager(DNVM)

<pre>
<mark>$ curl -sSL https://raw.githubusercontent.com/aspnet/Home/dev/dnvminstall.sh | DNX_BRANCH=dev sh && source ~/.dnx/dnvm/dnvm.sh</mark>
Downloading dnvm as script to '/Users/onlydel/.dnx/dnvm'

Appending source string to /Users/onlydel/.bash_profile
Appending source string to /Users/onlydel/.zshrc
Type 'source /Users/onlydel/.dnx/dnvm/dnvm.sh' to start using dnvm
Onlydel-MacBook-Pro:~ onlydel$ dnvm upgrade -r coreclr
Determining latest version
Latest version is 1.0.0-beta7
Downloading dnx-coreclr-darwin-x64.1.0.0-beta7 from https://www.nuget.org/api/v2
Download: https://www.nuget.org/api/v2/package/dnx-coreclr-darwin-x64/1.0.0-beta7
######################################################################## 100.0%
Installing to /Users/onlydel/.dnx/runtimes/dnx-coreclr-darwin-x64.1.0.0-beta7
Adding /Users/onlydel/.dnx/runtimes/dnx-coreclr-darwin-x64.1.0.0-beta7/bin to process PATH
Setting alias 'default' to 'dnx-coreclr-darwin-x64.1.0.0-beta7'
Onlydel-MacBook-Pro:~ onlydel$ dnvm upgrade -r mono
It appears you don't have Mono available. Remember to get Mono before trying to run  application.
Determining latest version
Latest version is 1.0.0-beta7
Downloading dnx-mono.1.0.0-beta7 from https://www.nuget.org/api/v2
Download: https://www.nuget.org/api/v2/package/dnx-mono/1.0.0-beta7
######################################################################## 100.0%
Installing to /Users/onlydel/.dnx/runtimes/dnx-mono.1.0.0-beta7
Adding /Users/onlydel/.dnx/runtimes/dnx-mono.1.0.0-beta7/bin to process PATH
Updating alias 'default' to 'dnx-mono.1.0.0-beta7'</pre>

#### Install the .NET Execution Environment (DNX)

.NET Core ì„¤ì¹˜í•˜ê¸°
<pre>
<mark>$ dnvm upgrade -r coreclr</mark>
Determining latest version
Latest version is 1.0.0-beta7
Downloading dnx-coreclr-darwin-x64.1.0.0-beta7 from https://www.nuget.org/api/v2
Download: https://www.nuget.org/api/v2/package/dnx-coreclr-darwin-x64/1.0.0-beta7
######################################################################## 100.0%
Installing to /Users/onlydel/.dnx/runtimes/dnx-coreclr-darwin-x64.1.0.0-beta7
Adding /Users/onlydel/.dnx/runtimes/dnx-coreclr-darwin-x64.1.0.0-beta7/bin to process PATH
Setting alias 'default' to 'dnx-coreclr-darwin-x64.1.0.0-beta7'</pre>

cross platform .net framework - monoì„¤ì¹˜
<pre>
<mark>$ dnvm upgrade -r mono</mark>
It appears you don't have Mono available. Remember to get Mono before trying to run  application.
Determining latest version
Latest version is 1.0.0-beta7
Downloading dnx-mono.1.0.0-beta7 from https://www.nuget.org/api/v2
Download: https://www.nuget.org/api/v2/package/dnx-mono/1.0.0-beta7
######################################################################## 100.0%
Installing to /Users/onlydel/.dnx/runtimes/dnx-mono.1.0.0-beta7
Adding /Users/onlydel/.dnx/runtimes/dnx-mono.1.0.0-beta7/bin to process PATH
Updating alias 'default' to 'dnx-mono.1.0.0-beta7'</pre>

ì„¤ì¹˜í™•ì¸
<pre>
<mark>$ dnvm list</mark>

Active Version              Runtime Architecture OperatingSystem Alias
------ -------              ------- ------------ --------------- -----
       1.0.0-beta7          coreclr x64          darwin
  *    1.0.0-beta7          mono                 linux/osx       default</pre>

#### yeomen ì„¤ì¹˜

/usr/local/bin ë””ë ‰í† ë¦¬ì—ì— ì“°ê¸° ê¶Œí•œ ìˆì–´ì•¼ í•œë‹¤.

<pre>
<mark>$ npm install -g yo</mark>

> spawn-sync@1.0.13 postinstall /usr/local/lib/node_modules/yo/node_modules/cross-spawn/node_modules/spawn-sync
> node postinstall

/usr/local/bin/yo -> /usr/local/lib/node_modules/yo/lib/cli.js

> yo@1.4.8 postinstall /usr/local/lib/node_modules/yo
> yodoctor


Yeoman Doctor
Running sanity checks on your system

âœ” Global configuration file is valid
âœ” NODE_PATH matches the npm root
âœ” Node.js version
âœ” No .bowerrc file in home directory
âœ” No .yo-rc.json file in home directory
âœ” npm version

Everything looks all right!
yo@1.4.8 /usr/local/lib/node_modules/yo
â”œâ”€â”€ titleize@1.0.0
â”œâ”€â”€ array-uniq@1.0.2
â”œâ”€â”€ figures@1.4.0
â”œâ”€â”€ async@1.4.2
â”œâ”€â”€ humanize-string@1.0.1 (decamelize@1.0.0)
â”œâ”€â”€ opn@3.0.2 (object-assign@3.0.0)
â”œâ”€â”€ user-home@2.0.0 (os-homedir@1.0.1)
â”œâ”€â”€ yeoman-character@1.0.1 (supports-color@1.3.1)
â”œâ”€â”€ findup@0.1.5 (commander@2.1.0, colors@0.6.2)
â”œâ”€â”€ string-length@1.0.1 (strip-ansi@3.0.0)
â”œâ”€â”€ sort-on@1.2.2 (arrify@1.0.0, dot-prop@2.2.0)
â”œâ”€â”€ chalk@1.1.1 (escape-string-regexp@1.0.3, ansi-styles@2.1.0, supports-color@2.0.0, strip-ansi@3.0.0, has-ansi@2.0.0)
â”œâ”€â”€ repeating@1.1.3 (is-finite@1.0.1)
â”œâ”€â”€ update-notifier@0.5.0 (is-npm@1.0.0, latest-version@1.0.1, semver-diff@2.0.0)
â”œâ”€â”€ root-check@1.0.0 (downgrade-root@1.1.0, sudo-block@1.2.0)
â”œâ”€â”€ configstore@1.2.1 (os-tmpdir@1.0.1, object-assign@3.0.0, graceful-fs@4.1.2, xdg-basedir@2.0.0, uuid@2.0.1, osenv@0.1.3, write-file-atomic@1.1.3, mkdirp@0.5.1)
â”œâ”€â”€ yosay@1.0.5 (ansi-regex@1.1.1, word-wrap@1.1.0, ansi-styles@2.1.0, strip-ansi@2.0.1, pad-component@0.0.1, taketalk@1.0.0, minimist@1.2.0, string-width@1.0.1)
â”œâ”€â”€ inquirer@0.9.0 (ansi-regex@2.0.0, strip-ansi@3.0.0, cli-width@1.0.1, rx-lite@2.5.2, through@2.3.8, readline2@0.1.1, run-async@0.1.0)
â”œâ”€â”€ got@4.2.0 (lowercase-keys@1.0.0, is-stream@1.0.1, timed-out@2.0.0, is-redirect@1.0.0, prepend-http@1.0.3, is-plain-obj@1.0.0, object-assign@3.0.0, unzip-response@1.0.0, node-status-codes@1.0.0, parse-json@2.2.0, create-error-class@2.0.1, pinkie-promise@1.0.0, duplexify@3.4.2, read-all-stream@3.0.1)
â”œâ”€â”€ npm-keyword@1.2.0 (got@3.3.1, registry-url@3.0.3)
â”œâ”€â”€ package-json@1.2.0 (got@3.3.1, registry-url@3.0.3)
â”œâ”€â”€ fullname@1.1.1 (npmconf@2.1.2)
â”œâ”€â”€ cross-spawn@0.4.1 (lru-cache@2.7.0, spawn-sync@1.0.13)
â”œâ”€â”€ meow@3.4.2 (trim-newlines@1.0.0, loud-rejection@1.0.0, object-assign@4.0.1, minimist@1.2.0, camelcase-keys@1.0.0, redent@1.0.0, read-pkg-up@1.0.1, normalize-package-data@2.3.4)
â”œâ”€â”€ lodash@3.10.1
â”œâ”€â”€ yeoman-environment@1.2.7 (diff@1.4.0, escape-string-regexp@1.0.3, log-symbols@1.0.2, text-table@0.2.0, untildify@2.1.0, debug@2.2.0, grouped-queue@0.3.0, mem-fs@1.1.0, globby@2.1.0, inquirer@0.8.5)
â”œâ”€â”€ insight@0.6.0 (object-assign@2.1.1, async@0.9.2, lodash.debounce@3.1.1, tough-cookie@1.2.0, os-name@1.0.3, inquirer@0.8.5, request@2.64.0)
â””â”€â”€ yeoman-doctor@1.4.0 (object-values@1.0.0, log-symbols@1.0.2, user-home@1.1.1, each-async@1.1.1, semver@4.3.6, bin-version-check@2.1.0, twig@0.8.2)</pre>

#### ìŠ¤ì¼€í´ë”©ì„ ìœ„í•´ OmniSharp generatorì„¤ì¹˜

yoë¥¼ ì´ìš©í•´ì„œ ê°œë°œí‹€ì„ ë§Œë“¤ì–´ì¤€ë‹¤.

<pre>
<mark>$ npm install -g generator-aspnet</mark>
generator-aspnet@0.0.75 /usr/local/lib/node_modules/generator-aspnet
â”œâ”€â”€ vs_projectname@1.0.2
â”œâ”€â”€ uuid@2.0.1
â”œâ”€â”€ chalk@1.1.1 (ansi-styles@2.1.0, escape-string-regexp@1.0.3, supports-color@2.0.0, has-ansi@2.0.0, strip-ansi@3.0.0)
â”œâ”€â”€ yosay@1.0.5 (ansi-styles@2.1.0, ansi-regex@1.1.1, word-wrap@1.1.0, strip-ansi@2.0.1, pad-component@0.0.1, minimist@1.2.0, taketalk@1.0.0, string-width@1.0.1, repeating@1.1.3)
â”œâ”€â”€ chai@1.10.0 (assertion-error@1.0.0, deep-eql@0.1.3)
â””â”€â”€ yeoman-generator@0.19.2 (diff@1.4.0, read-chunk@1.0.1, detect-conflict@1.0.0, yeoman-welcome@1.0.1, xdg-basedir@1.0.1, user-home@1.1.1, rimraf@2.4.3, async@0.9.2, mime@1.3.4, text-table@0.2.0, dargs@4.0.1, class-extend@0.1.1, debug@2.2.0, shelljs@0.4.0, nopt@3.0.4, cross-spawn@0.2.9, mkdirp@0.5.1, istextorbinary@1.0.2, run-async@0.1.0, mem-fs-editor@1.2.3, through2@0.6.5, cli-table@0.3.1, underscore.string@3.2.2, yeoman-assert@1.0.0, glob@5.0.15, findup-sync@0.2.1, yeoman-environment@1.2.7, github-username@1.1.1, sinon@1.17.1, dateformat@1.0.11, pretty-bytes@1.0.4, lodash@3.10.1, inquirer@0.8.5, download@4.2.1, gruntfile-editor@1.0.0, html-wiring@1.2.0)</pre>

## ìŠ¤ì¼€í´ë”©(Scheffolding)

1. ì†”ë£¨ì…˜ì„ ìœ„í•œ í´ë”ë¥¼ ë§Œë“ ë‹¤.
  
    <pre>
    $ mkdir -p ~/AspNet/MyFirstDnxApp</pre>

2. ì†”ë£¨ì…˜ í´ë”ì— global.jsoníŒŒì¼ì„ ë§Œë“¤ê³  ì•„ë˜ ë‚´ìš©ì„ ë„£ëŠ”ë‹¤.

    <pre class="prettyprint">
    {
      "sdk": {
        "version": "1.0.0-beta7"
      }
    }</pre>

3. Application typeì„ íƒ: ìœ„,ì•„ë˜ í™”ì‚´í‘œí‚¤ë¡œ ì„ íƒí›„ ì—”í„°

    <pre>
    $ yo aspnet

         _-----_
        |       |    .--------------------------.
        |--(o)--|    |      Welcome to the      |
       `---------Â´   |   marvellous ASP.NET 5   |
        ( _Â´U`_ )    |        generator!        |
        /___A___\    '--------------------------'
         |  ~  |
       __'.___.'__
     Â´   `  |Â° Â´ Y `

    ? What type of application do you want to create? (Use arrow keys)
    â¯ Empty Application
      Console Application
      Web Application
      Web Application Basic [without Membership and Authorization]
      Web API Application
      Nancy ASP.NET Application
      Class Library
      Unit test project</pre>

4. Application Name ì…ë ¥

    <pre>
    ? What's the name of your ASP.NET application? (EmptyApplication)
     create dnxFirstApp/.gitignore
     create dnxFirstApp/hosting.ini
     create dnxFirstApp/Startup.cs
     create dnxFirstApp/project.json
     create dnxFirstApp/Dockerfile
     create dnxFirstApp/wwwroot/README.md

    Your project is now created, you can use the following commands to get going
      cd "EmptyApplication"
      dnu restore
      dnu build (optional, build will also happen when it's run)
      dnx kestrel</pre>

## ì‹¤í–‰

í„°ë¯¸ë„ë¡œ EmptyApplication ë””ë ‰í† ë¦¬ë¡œ ì´ë™ `dnu restore`ë¥¼ ì‹¤í–‰ í•œë‹¤.

<pre>
$ dnu restore
Microsoft .NET Development Utility Mono-x64-1.0.0-beta7-15532

  GET https://api.nuget.org/v3/index.json
  OK https://api.nuget.org/v3/index.json 1119ms
Restoring packages for /Users/onlydel/AspNet/src/EmptyApplication/project.json
  GET https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.server.iis/index.json
  GET https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.server.weblistener/index.json
  GET https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.server.kestrel/index.json
  OK https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.server.iis/index.json 1119ms
  GET https://api.nuget.org/v3-flatcontainer/microsoft.aspnet.server.iis/1.0.0-beta7/microsoft.aspnet.server.iis.1.0.0-beta7.nupkg
  
  ...

Installing System.Reflection.Emit.4.0.0
Installing System.Reflection.Emit.ILGeneration.4.0.0
Installing System.Reflection.TypeExtensions.4.0.0
Installing System.Diagnostics.Tracing.4.0.21-beta-23225
Installing System.Threading.Thread.4.0.0-beta-23225
Installing System.Diagnostics.TraceSource.4.0.0-beta-23225
Installing System.Reflection.Extensions.4.0.1-beta-23225
Installing Microsoft.Win32.Registry.4.0.0-beta-23225
Installing System.Diagnostics.Process.4.0.0-beta-23225
Installing System.Security.SecureString.4.0.0-beta-23225
Installing System.Security.Claims.4.0.0
Installing System.Net.NetworkInformation.4.0.10-beta-23123
Installing System.Private.Networking.4.0.0
Writing lock file /Users/onlydel/AspNet/src/EmptyApplication/project.lock.json
Restore complete, 201807ms elapsed

NuGet Config files used:
    /Users/onlydel/.config/NuGet/NuGet.Config

Feeds used:
    https://api.nuget.org/v3-flatcontainer/

Installed:
    128 package(s) to /Users/onlydel/.dnx/packages</pre>

í˜¹ì‹œ ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ê°€ ë‚˜ë©´ monoì„¤ì¹˜ë¥¼ ë‹¤ì‹œ í•´ ì¤€ë‹¤.

<pre>
/Users/onlydel/.dnx/runtimes/dnx-mono.1.0.0-beta7/bin/dnx: line 14: exec: mono: not found</pre>

* brewë¡œ mono ì„¤ì¹˜

    <pre>
    $ brew install mono
    ==> Downloading https://homebrew.bintray.com/bottles/mono-4.2.0.179.el_capitan.bottle.tar.gz
    ######################################################################## 100.0%
    ==> Pouring mono-4.2.0.179.el_capitan.bottle.tar.gz
    ==> Caveats
    To use the assemblies from other formulae you need to set:
      export MONO_GAC_PREFIX="/usr/local"
    ==> Summary
    ğŸº  /usr/local/Cellar/mono/4.2.0.179: 1010 files, 184M</pre>

`dnx kestrel`ì„ ì‹¤í–‰ í•˜ë©´ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹œì‘ëœë‹¤.

<pre>
$ dnx kestrel
Application started. Press Ctrl+C to shut down.</pre>

ë¸Œë¼ìš°ì €ì—ì„œ `localhost:5000`ìœ¼ë¡œ ì ‘ì†í•˜ë©´ `Hello World!!`ë¥¼ ë³¼ìˆ˜ ìˆë‹¤.

---
**ì°¸ì¡°**

* [Install ASP.NET 5 on OS X](http://docs.asp.net/en/latest/getting-started/installing-on-mac.html){:target="_blank"}